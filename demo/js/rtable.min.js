!function(a){"function"==typeof define&&define.amd?define(["react","pubsub-js"],a):"object"==typeof exports?module.exports=a(require("react"),require("pubsub-js")):this.RTable=a(React,PubSub)}(function(a,b){function c(a){var b=c.cache[a];if(!b){var d={};b=c.cache[a]={id:a,exports:d},c.modules[a].call(d,b,d)}return b.exports}return c.cache=[],c.modules=[function(a){var b={componentWillMount:function(){this.shouldUpdate=!0,this.oldProps=null},componentWillReceiveProps:function(a){var b=!0,c=null;this.props.optimization&&(c=JSON.stringify(a),b=this.oldProps!==c),this.shouldUpdate=b,this.oldProps=c},shouldComponentUpdate:function(){return this.shouldUpdate}};a.exports=b},function(a){var b=c(8),d=c(6),e=c(0),f=b.createClass({mixins:[e],displayName:"RTableCell",getDefaultProps:function(){return{data:{},definition:{},columnFieldValueProp:"field",dataProp:".",optimization:!0}},propTypes:{dataProp:b.PropTypes.string,columnFieldValueProp:b.PropTypes.string,definition:b.PropTypes.oneOfType([b.PropTypes.string,b.PropTypes.object]),data:b.PropTypes.object,optimization:b.PropTypes.bool},render:function(){var a=null,c=null;return"object"==typeof this.props.definition?(this.props.columnFieldValueProp&&this.props.definition.hasOwnProperty(this.props.columnFieldValueProp)||d.warn("definition property was not found on definition object",this.props.definition,this.props.columnFieldValueProp),a=this.props.definition[this.props.columnFieldValueProp]):a=this.props.definition,"."!==this.props.dataProp?(this.props.data.hasOwnProperty(this.props.dataProp)||d.warn("could not find data propety on object",this.props.data,this.props.dataProp),c=this.props.data[this.props.dataProp]):c=this.props.data,b.createElement("td",{className:"rtable-column-body"},c[a])}});a.exports=f},function(a){var b=c(8),d=c(7),e=b.createClass({displayName:"RTableFilterCell",getInitialState:function(){return{filter:null}},getDefaultProps:function(){return{definition:{}}},propTypes:{definition:b.PropTypes.oneOfType([b.PropTypes.string,b.PropTypes.object])},handleChange:function(a){d.publish("RTable.FilterChange",{definition:this.props.definition,value:a.target.value}),this.setState({definition:a.target.value})},componentWillUnmount:function(){d.unsubscribe("RTable.FilterChange")},render:function(){return b.createElement("th",{className:"rtable-column-filter"},b.createElement("input",{type:"text",value:this.state.filter,onChange:this.handleChange}))}});a.exports=e},function(a){var b=c(8),d=c(6),e=b.createClass({displayName:"RTableHeaderCell",getDefaultProps:function(){return{definition:{},columnNameProp:"name"}},propTypes:{definition:b.PropTypes.oneOfType([b.PropTypes.string,b.PropTypes.object]),columnNameProp:b.PropTypes.string},render:function(){var a=null;return"object"==typeof this.props.definition?(this.props.columnNameProp&&this.props.definition.hasOwnProperty(this.props.columnNameProp)||d.warn("Header Name property was not found on definition object",this.props.definition,this.props.columnNameProp),a=this.props.definition[this.props.columnNameProp]):a=this.props.definition,b.createElement("th",{className:"rtable-column-header"},a)}});a.exports=e},function(a){var b=c(8),d=c(7),e=b.createClass({displayName:"RTableSelectCell",getInitialState:function(){return{isChecked:!1}},getDefaultProps:function(){return{data:{}}},propTypes:{data:b.PropTypes.object},onChange:function(){var a=!this.state.isChecked;d.publish("RTable.RowChecked",{data:this.props.data,value:a}),this.setState({isChecked:a})},render:function(){return b.createElement("td",{className:"rtable-selection rtable-column-body"},b.createElement("input",{type:"checkbox",checked:this.state.isChecked,onChange:this.onChange}))},componentWillUnmount:function(){d.unsubscribe("RTable.RowSelected")}});a.exports=e},function(a){var b=c(8),d=c(7),e=c(3),f=c(2),g=c(4),h=c(1),i={displayName:"RTable",getDefaultProps:function(){return{data:[],definitions:[],dataProp:".",columnFieldValueProp:"field",columnNameProp:"name",enableFilters:!0,enableSelection:!0,classes:"rtable",optimization:!0,fixedHeader:!1}},tableScroll:function(){this.refs.rHeader.getDOMNode().style.width=this.refs.rTable.getDOMNode().clientWidth+this.refs.rTable.getDOMNode().scrollLeft+"px",this.refs.rBody.getDOMNode().style.width=this.refs.rTable.getDOMNode().clientWidth+this.refs.rTable.getDOMNode().scrollLeft+"px"},componentDidMount:function(){d.publish("RTable.Mounted",null),this.props.fixedHeader&&this.refs.rTable.getDOMNode().addEventListener("scroll",this.tableScroll)},componentWillUpdate:function(){d.publish("RTable.BeforeUpdated",null)},componentDidUpdate:function(){d.publish("RTable.Updated",null)},componentWillUnmount:function(){d.publish("RTable.Unmounted",null),d.unsubscribe("RTable.Mounted"),d.unsubscribe("RTable.Updated"),d.unsubscribe("RTable.BeforeUpdated"),d.unsubscribe("RTable.Unmounted"),this.refs.rTable.getDOMNode().removeEventListener("scroll",this.tableScroll)},propTypes:{definitions:b.PropTypes.oneOfType([b.PropTypes.arrayOf(b.PropTypes.string),b.PropTypes.arrayOf(b.PropTypes.object)]),data:b.PropTypes.arrayOf(b.PropTypes.object),dataProp:b.PropTypes.string,columnFieldValueProp:b.PropTypes.string,columnNameProp:b.PropTypes.string,enableFilters:b.PropTypes.bool,enableSelection:b.PropTypes.bool,classes:b.PropTypes.string,optimization:b.PropTypes.bool,fixedHeader:b.PropTypes.bool},render:function(){var a=[],c=[],d=[],g=[],h=[],i="rtable ";if(i+=this.props.fixedHeader?" rtable-fixed-header ":"",i+=this.props.classes,this.props.data.length){this.renderSelectionColumn(g,c,d);for(var j=0;j<this.props.definitions.length;j++)g.push(b.createElement("col",{key:"col_"+j,className:"rtable-col rtable-col-"+j})),c.push(b.createElement(e,{key:"header_cell_"+j,definition:this.props.definitions[j],columnNameProp:this.props.columnNameProp})),d.push(b.createElement(f,{key:"filter_cell"+j,definition:this.props.definitions[j]})),this.renderColumn(h,j);a.push(b.createElement("tr",{key:"rTableHeaderRow"},c)),this.props.enableFilters&&a.push(b.createElement("tr",{key:"rtableFilterRow"},d))}return b.createElement("table",{className:i,ref:"rTable"},b.createElement("colgroup",null,g),b.createElement("thead",{ref:"rHeader"},a),b.createElement("tbody",{ref:"rBody"},h))},getInitialRow:function(a,c){var d=[];return this.props.enableSelection&&d.push(b.createElement(g,{key:"row_"+a+"_select",data:c})),d},renderColumn:function(a,c){for(var d=0;d<this.props.data.length;d++){var e=a[d]=a[d]||b.createElement("tr",{key:"row_"+d}),f=e.props.children=e.props.children||this.getInitialRow(d,this.props.data[d]);f.push(b.createElement(h,{key:"row_"+d+"_cell_"+c,data:this.props.data[d],definition:this.props.definitions[c],columnFieldValueProp:this.props.columnFieldValueProp,dataProp:this.props.dataProp,optimization:this.props.optimization}))}},renderSelectionColumn:function(a,c,d){this.props.enableSelection&&(a.push(b.createElement("col",{key:"col_selection",className:"rtable-col rtable-selection"})),c.push(b.createElement("th",{key:"header_cell_selection",className:"rtable-selection rtable-column-header"})),d.push(b.createElement("th",{key:"filter_cell_selection",className:"rtable-selection rtable-column-filter"})))}};a.exports={"class":i,Component:b.createClass(i)}},function(a){var b={};b.stringify=function(a){return JSON.stringify(a)},b.cloneProps=function(a){return JSON.parse(JSON.stringify(a))},b.equalProps=function(a,b){return JSON.stringify(a)===JSON.stringify(b)},b.warn=function(){console&&console.warn(arguments)},a.exports=b},function(a){a.exports=b},function(b){b.exports=a}],c(5)});
//# sourceMappingURL=rtable.min.js.map